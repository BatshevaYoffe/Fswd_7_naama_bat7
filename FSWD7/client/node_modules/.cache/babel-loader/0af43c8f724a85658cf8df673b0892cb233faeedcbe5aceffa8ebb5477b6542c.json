{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Bat7/Fswd6/FullStack6/FullStack6/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Bat7/Fswd6/FullStack6/FullStack6/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Bat7/Fswd6/FullStack6/FullStack6/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useNavigate}from\"react-router-dom\";import{useState}from\"react\";import styles from\"./Login.module.css\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var navigate=useNavigate();if(localStorage.getItem(\"currentUser\")){localStorage.clear();}var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var url,requestOptions;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(!name||!password)){_context.next=3;break;}return _context.abrupt(\"return\");case 3:url=\"http://localhost:3000/login\";requestOptions={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,password:password})};fetch(url,requestOptions).then(function(response){if(response.status===200){return response.json();}else if(response.status===401){throw\"Wrong username or password\";}}).then(function(user){localStorage.setItem(\"currentUser\",JSON.stringify(user));navigate(\"/users/\".concat(name,\"/info\"));}).catch(function(error){console.error(error);alert(error);});case 6:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"section\",{className:styles.section,children:/*#__PURE__*/_jsxs(\"form\",{className:styles.form,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h5\",{children:\"LOGIN\"}),/*#__PURE__*/_jsx(\"div\",{className:styles[\"form-row\"],children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Username\",className:styles[\"form-input\"],id:\"name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:styles[\"form-row\"],children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",className:styles[\"form-input\"],id:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:styles.btn,children:\"LOGIN\"}),/*#__PURE__*/_jsx(Link,{className:styles[\"btn-link\"],to:\"/register\",children:\"REGISTER\"})]})});}export default Login;","map":{"version":3,"names":["useNavigate","useState","styles","Link","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","name","setName","_useState3","_useState4","password","setPassword","navigate","localStorage","getItem","clear","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","url","requestOptions","wrap","_callee$","_context","prev","next","preventDefault","abrupt","method","headers","body","JSON","stringify","fetch","then","response","status","json","user","setItem","concat","catch","error","console","alert","stop","_x","apply","arguments","className","section","children","form","onSubmit","type","placeholder","id","value","onChange","target","btn","to"],"sources":["C:/Users/Bat7/Fswd6/FullStack6/FullStack6/client/src/Login.js"],"sourcesContent":["import { useNavigate } from \"react-router-dom\";\r\nimport { useState } from \"react\";\r\nimport styles from \"./Login.module.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Login() {\r\n  const [name, setName] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const navigate = useNavigate();\r\n\r\n  if (localStorage.getItem(\"currentUser\")) {\r\n    localStorage.clear();\r\n  }\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!name || !password) {\r\n      return;\r\n    }\r\n\r\n    const url = \"http://localhost:3000/login\";\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ name, password }),\r\n    };\r\n\r\n    fetch(url, requestOptions)\r\n      .then((response) => {\r\n        if (response.status === 200) {\r\n          return response.json();\r\n        } else if (response.status === 401) {\r\n          throw \"Wrong username or password\";\r\n        }\r\n      })\r\n      .then((user) => {\r\n        localStorage.setItem(\"currentUser\", JSON.stringify(user));\r\n        navigate(`/users/${name}/info`);\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        alert(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <section className={styles.section}>\r\n      <form className={styles.form} onSubmit={handleSubmit}>\r\n        <h5>LOGIN</h5>\r\n        <div className={styles[\"form-row\"]}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Username\"\r\n            className={styles[\"form-input\"]}\r\n            id=\"name\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className={styles[\"form-row\"]}>\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            className={styles[\"form-input\"]}\r\n            id=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n        </div>\r\n        <button type=\"submit\" className={styles.btn}>\r\n          LOGIN\r\n        </button>\r\n        <Link className={styles[\"btn-link\"]} to=\"/register\">\r\n          REGISTER\r\n        </Link>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}